Bootstrap: docker
From: centos:7
IncludeCmd: yes

%setup


%post
      yum update -y
      yum install epel-release -y
      yum install -y make cmake git python-devel python-pip
      yum install -y environment-modules tclx
      yum install -y centos-release-scl
      yum install -y devtoolset-7-gcc devtoolset-7-gcc-c++ automake zlib-static
      yum install -y wget subversion perl-URI


      mkdir -p /container/opt

#Move devtoolset
      cp -a /opt/rh /container/opt
      sed 's+/opt/rh+/container/opt/rh+g' /container/opt/rh/devtoolset-7/enable > /container/opt/rh/devtoolset-7/enable.new
      cp /container/opt/rh/devtoolset-7/enable.new /container/opt/rh/devtoolset-7/enable
      rm -fr /opt/rh
      